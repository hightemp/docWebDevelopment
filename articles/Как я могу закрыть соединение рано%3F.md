# Как я могу закрыть соединение рано?
Вы можете использовать Fast-CGI с PHP-FPM для использования функции [`fastcgi_end_request ()`](http://php-fpm.org/wiki/Features#fastcgi_finish_request.28.29). Таким образом, вы можете продолжать выполнять некоторую обработку, пока ответ уже отправлен клиенту.

* [пример использования fastcgi \_finish \_request() (ноябрь 2010 г.)](https://stackoverflow.com/q/4236040/367456)

Это можно найти в руководстве по PHP здесь: [FastCGI Process Manager (FPM)](http://php.net/manual/install.fpm.php); Но эта функция специально не описана в руководстве. Вот выдержка из [PHP-FPM: PHP FastCGI Process Manager Wiki](http://php-fpm.org/wiki/Main_Page):

* * *

## fastcgi\_finish\_request()

Scope: php function Category: Optimization

This feature allows you to speed up implementation of some php queries. Acceleration is possible when there are actions in the process of script execution that do not affect server response. For example, saving the session in memcached can occur after the page has been formed and passed to a web server. `fastcgi_finish_request()` is a php feature, that stops the response output. Web server immediately starts to transfer response "slowly and sadly" to the client, and php at the same time can do a lot of useful things in the context of a query, such as saving the session, converting the downloaded video, handling all kinds of statistics, etc.

 `fastcgi_finish_request()` can invoke executing shutdown function.

**********
[PHP](/tags/PHP.md)
